{"version":3,"sources":["webpack:///./src/views/EditProfile.vue?7cf7","webpack:///src/views/EditProfile.vue","webpack:///./src/views/EditProfile.vue?d456","webpack:///./src/views/EditProfile.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","model","value","callback","$$v","newName","expression","newEmail","newPwd","rules","match","about","staticClass","on","$event","commit","_v","slot","_s","staticRenderFns","data","computed","push","rule","watch","created","$api","user","methods","validateField","$refs","form","validate","component"],"mappings":"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","file":"js/chunk-2d237582.fb16992c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md8\":\"\"}},[_c('material-card',{attrs:{\"color\":\"myinfo\",\"title\":\"Edit Profile\",\"text\":\"Complete your profile\"}},[_c('v-form',{ref:\"form\"},[_c('v-container',{attrs:{\"py-0\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md4\":\"\"}},[_c('v-text-field',{attrs:{\"color\":\"myprimary\",\"label\":\"User Name\"},model:{value:(_vm.newName),callback:function ($$v) {_vm.newName=$$v},expression:\"newName\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md8\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Email Address\",\"color\":\"myprimary\"},model:{value:(_vm.newEmail),callback:function ($$v) {_vm.newEmail=$$v},expression:\"newEmail\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md6\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"New Password\",\"color\":\"myprimary\",\"type\":\"password\",\"hint\":\"修改密码需要重新登录哦\"},model:{value:(_vm.newPwd),callback:function ($$v) {_vm.newPwd=$$v},expression:\"newPwd\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md6\":\"\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.rules,\"label\":\"Repeat Password\",\"color\":\"myprimary\",\"type\":\"password\"},model:{value:(_vm.match),callback:function ($$v) {_vm.match=$$v},expression:\"match\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-textarea',{attrs:{\"color\":\"myprimary\",\"label\":\"About Me\",\"value\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\"clearable\":\"\",\"hint\":\"向大家介绍一下自己吧\"},model:{value:(_vm.about),callback:function ($$v) {_vm.about=$$v},expression:\"about\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"text-xs-right\":\"\"}},[_c('v-btn',{staticClass:\"mx-0 font-weight-light\",attrs:{\"color\":\"myprimary\"},on:{\"click\":function($event){return _vm.commit()}}},[_vm._v(\"Update Profile\")])],1)],1)],1)],1)],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md4\":\"\"}},[_c('material-card',{staticClass:\"v-card-profile\"},[_c('v-avatar',{staticClass:\"mx-auto d-block\",attrs:{\"slot\":\"offset\",\"size\":\"130\"},slot:\"offset\"},[_c('img',{attrs:{\"src\":\"https://demos.creative-tim.com/vue-material-dashboard/img/marc.aba54d65.jpg\"}})]),_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h6',{staticClass:\"category text-gray font-weight-thin mb-3\"},[_vm._v(_vm._s(this.newName))]),_c('h4',{staticClass:\"card-title font-weight-light\"},[_vm._v(_vm._s(this.newEmail))]),_c('p',{staticClass:\"card-description font-weight-light\"},[_vm._v(_vm._s(this.about))])])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container\n    fill-height\n    fluid\n    grid-list-xl>\n    <v-layout\n      justify-center\n      wrap>\n      <v-flex\n        xs12\n        md8>\n        <material-card\n          color=\"myinfo\"\n          title=\"Edit Profile\"\n          text=\"Complete your profile\">\n          <v-form ref=\"form\">\n            <v-container py-0>\n              <v-layout wrap>\n                <v-flex\n                  xs12\n                  md4>\n                  <v-text-field\n                    v-model=\"newName\"\n                    color=\"myprimary\"\n                    label=\"User Name\"/>\n                </v-flex>\n                <v-flex\n                  xs12\n                  md8>\n                  <v-text-field\n                    v-model=\"newEmail\"\n                    label=\"Email Address\"\n                    color=\"myprimary\"/>\n                </v-flex>\n                <v-flex\n                  xs12\n                  md6>\n                  <v-text-field\n                    v-model=\"newPwd\"\n                    label=\"New Password\"\n                    color=\"myprimary\"\n                    type=\"password\"\n                    hint=\"修改密码需要重新登录哦\"\n                  />\n                </v-flex>\n                <v-flex\n                  xs12\n                  md6>\n                  <v-text-field\n                    v-model=\"match\"\n                    :rules=\"rules\"\n                    label=\"Repeat Password\"\n                    color=\"myprimary\"\n                    type=\"password\"\n                  />\n                </v-flex>\n                <v-flex xs12>\n                  <v-textarea\n                    v-model=\"about\"\n                    color=\"myprimary\"\n                    label=\"About Me\"\n                    value=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\"\n                    clearable\n                    hint=\"向大家介绍一下自己吧\"\n                  />\n                </v-flex>\n                <v-flex\n                  xs12\n                  text-xs-right>\n                  <v-btn\n                    class=\"mx-0 font-weight-light\"\n                    color=\"myprimary\"\n                    @click=\"commit()\"\n                  >Update Profile</v-btn>\n                </v-flex>\n              </v-layout>\n            </v-container>\n          </v-form>\n        </material-card>\n      </v-flex>\n      <v-flex\n        xs12\n        md4>\n        <material-card class=\"v-card-profile\">\n          <v-avatar\n            slot=\"offset\"\n            class=\"mx-auto d-block\"\n            size=\"130\">\n            <img src=\"https://demos.creative-tim.com/vue-material-dashboard/img/marc.aba54d65.jpg\">\n          </v-avatar>\n          <v-card-text class=\"text-xs-center\">\n            <h6 class=\"category text-gray font-weight-thin mb-3\">{{ this.newName }}</h6>\n            <h4 class=\"card-title font-weight-light\">{{ this.newEmail }}</h4>\n            <p class=\"card-description font-weight-light\">{{ this.about }}</p>\n          </v-card-text>\n        </material-card>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  // create by keith\n  data: () => ({\n    newName: '',\n    newEmail: '',\n    newPwd: '',\n    match: '',\n    about: ''\n  }),\n\n  computed: {\n    rules () {\n      const rules = []\n      if (this.newPwd) {\n        const rule = v => (!!v && v) === this.newPwd || '两次密码输入不一致'\n        rules.push(rule)\n      }\n      return rules\n    }\n  },\n\n  watch: {\n    match: 'validateField'\n  },\n\n  created: function () {\n    this.$api.user\n      .getInfo({\n        uid: window.localStorage.uid\n      })\n      .then(res => {\n        var info = res.data.userInfo\n        this.newName = info.username\n        this.newEmail = info.email\n        this.about = info.introduction\n      })\n      .catch(err => {})\n  },\n  methods: {\n    validateField () {\n      this.$refs.form.validate()\n    },\n\n    commit () {\n      if (this.$refs.form.validate()) {\n        this.$api.user\n          .edit({\n            username: this.newName,\n            email: this.newEmail,\n            password: this.newPwd,\n            introduction: this.about,\n            uid: window.localStorage.uid\n          })\n          .then(res => {\n            console.log(res)\n            switch (res.data.status) {\n              case '200':\n                this.$message({\n                  message: '信息修改成功！',\n                  type: 'success'\n                })\n                var path =\n                  '/user-profile/' + window.localStorage.uid + '/type/info'\n                this.$router.replace(path)\n                break\n              case '201':\n                this.$message({\n                  message: '信息修改成功！需要重新登录',\n                  type: 'success'\n                })\n                // remove old user info and token\n                window.localStorage.clear()\n                this.$router.replace({\n                  path: '/login',\n                  query: {\n                    redirect: '/user-profile'\n                  }\n                })\n                break\n              default:\n                this.$message.error(res.data.message)\n            }\n          })\n          .catch(err => {})\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditProfile.vue?vue&type=template&id=4edf2863&\"\nimport script from \"./EditProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./EditProfile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}