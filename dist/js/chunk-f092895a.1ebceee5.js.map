{"version":3,"sources":["webpack:///./src/views/UserProfile.vue?3e71","webpack:///src/views/UserProfile.vue","webpack:///./src/views/UserProfile.vue?9311","webpack:///./src/views/UserProfile.vue?a24c","webpack:///./src/views/UserProfile.vue?c8b6"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","title","subtitle","_l","pixels","slice","pixel","index","key","staticClass","slot","_v","_s","email","username","about","followPath","follow","on","goStar","star","fansPath","fans","goFollow","staticRenderFns","data","watch","$route","created","getInfo","methods","params","id","starPath","isOwner","window","localStorage","uid","getTitle","getData","getPic","type","$api","user","image","smallUrl","pid","iid","views","count","stars","likes","thumb","$router","replace","judge","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,cAAc,GAAG,MAAQ,GAAG,eAAe,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,iBAAiB,GAAG,KAAO,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,IAAM,KAAK,CAACF,EAAG,gBAAgB,CAACE,MAAM,CAAC,MAAQN,EAAIO,MAAM,KAAOP,EAAIQ,SAAS,MAAQ,WAAW,CAACJ,EAAG,WAAW,CAACE,MAAM,CAAC,IAAM,GAAG,KAAO,KAAKN,EAAIS,GAAIT,EAAIU,OAAOC,MAAM,IAAI,SAASC,EAAMC,GAAO,OAAOT,EAAG,SAAS,CAACU,IAAID,EAAMP,MAAM,CAAC,IAAM,KAAK,CAACF,EAAG,mBAAmB,CAACE,MAAM,CAAC,MAAQM,MAAU,MAAK,IAAI,IAAI,GAAGR,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,IAAM,KAAK,CAACF,EAAG,gBAAgB,CAACW,YAAY,kBAAkB,CAACX,EAAG,WAAW,CAACW,YAAY,kBAAkBT,MAAM,CAAC,KAAO,SAAS,KAAO,OAAOU,KAAK,UAAU,CAACZ,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,mFAAmFF,EAAG,YAAYA,EAAG,cAAc,CAACW,YAAY,kBAAkB,CAACX,EAAG,KAAK,CAACW,YAAY,4CAA4C,CAACf,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAImB,UAAUf,EAAG,KAAK,CAACW,YAAY,gCAAgC,CAACf,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAIoB,aAAahB,EAAG,IAAI,CAACW,YAAY,sCAAsC,CAACf,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAIqB,UAAUjB,EAAG,cAAc,CAACW,YAAY,UAAU,CAACX,EAAG,cAAc,CAACE,MAAM,CAAC,GAAKN,EAAIsB,aAAa,CAAClB,EAAG,OAAO,CAACE,MAAM,CAAC,MAAQ,cAAc,CAACN,EAAIiB,GAAG,WAAWjB,EAAIkB,GAAGlB,EAAIuB,aAAanB,EAAG,YAAY,CAACW,YAAY,QAAQT,MAAM,CAAC,KAAO,QAAQkB,GAAG,CAAC,MAAQxB,EAAIyB,SAAS,CAACrB,EAAG,OAAO,CAACE,MAAM,CAAC,MAAQ,cAAc,CAACN,EAAIiB,GAAG,SAASjB,EAAIkB,GAAGlB,EAAI0B,WAAWtB,EAAG,cAAc,CAACW,YAAY,QAAQT,MAAM,CAAC,GAAKN,EAAI2B,WAAW,CAACvB,EAAG,OAAO,CAACE,MAAM,CAAC,MAAQ,cAAc,CAACN,EAAIiB,GAAG,SAASjB,EAAIkB,GAAGlB,EAAI4B,YAAY,GAAI5B,EAAW,QAAEI,EAAG,QAAQ,CAACW,YAAY,oBAAoBT,MAAM,CAAC,MAAQ,WAAW,MAAQ,GAAG,GAAK,kBAAkB,CAACN,EAAIiB,GAAG,kBAAkB,CAAEjB,EAAY,SAAEI,EAAG,QAAQ,CAACW,YAAY,oBAAoBT,MAAM,CAAC,MAAQ,WAAW,MAAQ,IAAIkB,GAAG,CAAC,MAAQxB,EAAI6B,WAAW,CAAC7B,EAAIiB,GAAG,gBAAgBb,EAAG,QAAQ,CAACW,YAAY,oBAAoBT,MAAM,CAAC,MAAQ,WAAW,MAAQ,IAAIkB,GAAG,CAAC,MAAQxB,EAAI6B,WAAW,CAAC7B,EAAIiB,GAAG,cAAc,IAAI,IAAI,IAAI,IAAI,IAC1jEa,EAAkB,GC+DtB,G,wCAAA,CAEEC,KAAM,WAAR,OACA,YACA,SACA,SACA,SACA,OACA,OACA,YACA,WACA,cACA,YACA,YACA,YACA,SACA,cAGEC,MAAO,CAELC,OAAQ,UACRX,WAAY,WAGdY,QAAS,WACPjC,KAAKkC,WAGPC,QAAS,CACPD,QADJ,WAGMlC,KAAKqB,WAAa,SAAWrB,KAAKgC,OAAOI,OAAOC,GAAK,eACrDrC,KAAK0B,SAAW,SAAW1B,KAAKgC,OAAOI,OAAOC,GAAK,aACnDrC,KAAKsC,SAAW,iBAAmBtC,KAAKgC,OAAOI,OAAOC,GAAK,aAE3DrC,KAAKuC,QAAUvC,KAAKgC,OAAOI,OAAOC,KAAOG,OAAOC,aAAaC,IAE7D1C,KAAKS,OAAS,GACdT,KAAK2C,WACL3C,KAAK4C,UACL5C,KAAK6C,UAEPF,SAdJ,WAgBM,OAAQ3C,KAAKgC,OAAOI,OAAOU,MACzB,IAAK,OACH9C,KAAKM,MAAQ,OACbN,KAAKO,SAAW,eAChB,MACF,IAAK,OACHP,KAAKM,MAAQ,OACbN,KAAKO,SAAW,iBAChB,QAGNqC,QA3BJ,WA2BA,WAEM5C,KAAK+C,KAAKC,KAChB,SACQ,IAAR,wBAEA,kBACQ,QAAR,OACQ,IAAR,kBACQ,EAAR,oBACQ,EAAR,cACQ,EAAR,qBACQ,EAAR,gBACQ,EAAR,YACQ,EAAR,YACQ,EAAR,WAEA,wBAEIH,OA9CJ,WA8CA,WACM,OAAQ7C,KAAKgC,OAAOI,OAAOU,MACzB,IAAK,OAEH9C,KAAK+C,KAAKE,MACpB,mBACY,IAAZ,wBAEA,kBAAY,IAAZ,mBAAY,IACE,IAAK,IAAnB,mFACoBtC,EAAQ,CACVuC,SAAU,EAA5B,gCACkBC,IAAKrB,EAAKsB,IACVC,MAAOvB,EAAKwB,MACZC,MAAOzB,EAAKL,KACZ+B,MAAO1B,EAAK2B,OAEd,EAAhB,gBATA,sFAYA,uBACU,MACF,IAAK,OACHzD,KAAK+C,KAAKE,MACpB,SACY,IAAZ,wBAEA,kBAAY,IAAZ,mBAAY,IACE,IAAK,IAAnB,kFACoBtC,EAAQ,CACVuC,SAAU,EAA5B,gCACkBC,IAAKrB,EAAKsB,IACVC,MAAOvB,EAAKwB,MACZC,MAAOzB,EAAKL,KACZ+B,MAAO1B,EAAK2B,OAEd,EAAhB,gBATA,sFAYA,uBACU,QAGN7B,SAzFJ,WAyFA,WAEM5B,KAAK+C,KAAKC,KAChB,UACQ,UAAR,cACQ,IAAR,wBACQ,IAAR,wBAEA,kBACQ,QAAR,OACQ,EAAR,aAEA,wBAEIxB,OAvGJ,WAyGMxB,KAAK0D,QAAQC,QAAQ3D,KAAKsC,UAC1BtC,KAAK2C,WACL3C,KAAKS,OAAS,GACdT,KAAK6C,UAEPe,MA9GJ,WA8GA,WAEM5D,KAAK+C,KAAKC,KAChB,cACQ,IAAR,wBACQ,IAAR,wBAEA,kBACQ,QAAR,OACQ,EAAR,4BAEA,2BCtNqV,I,wBCQjVa,EAAY,eACd,EACA/D,EACA+B,GACA,EACA,KACA,KACA,MAIa,aAAAgC,E,6CCnBf,yBAA+c,EAAG,G","file":"js/chunk-f092895a.1ebceee5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md8\":\"\"}},[_c('material-card',{attrs:{\"title\":_vm.title,\"text\":_vm.subtitle,\"color\":\"myinfo\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.pixels.slice(1)),function(pixel,index){return _c('v-flex',{key:index,attrs:{\"md4\":\"\"}},[_c('material-my-card',{attrs:{\"pixel\":pixel}})],1)}),1)],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md4\":\"\"}},[_c('material-card',{staticClass:\"v-card-profile\"},[_c('v-avatar',{staticClass:\"mx-auto d-block\",attrs:{\"slot\":\"offset\",\"size\":\"130\"},slot:\"offset\"},[_c('img',{attrs:{\"src\":\"https://demos.creative-tim.com/vue-material-dashboard/img/marc.aba54d65.jpg\"}})]),_c('v-spacer'),_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h6',{staticClass:\"category text-gray font-weight-thin mb-3\"},[_vm._v(_vm._s(_vm.email))]),_c('h4',{staticClass:\"card-title font-weight-light\"},[_vm._v(_vm._s(_vm.username))]),_c('p',{staticClass:\"card-description font-weight-light\"},[_vm._v(_vm._s(_vm.about))]),_c('v-card-text',{staticClass:\"body-2\"},[_c('router-link',{attrs:{\"to\":_vm.followPath}},[_c('span',{attrs:{\"color\":\"lightinfo\"}},[_vm._v(\"Follow: \"+_vm._s(_vm.follow))])]),_c('el-button',{staticClass:\"items\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.goStar}},[_c('span',{attrs:{\"color\":\"lightinfo\"}},[_vm._v(\"Star: \"+_vm._s(_vm.star))])]),_c('router-link',{staticClass:\"items\",attrs:{\"to\":_vm.fansPath}},[_c('span',{attrs:{\"color\":\"lightinfo\"}},[_vm._v(\"Fans: \"+_vm._s(_vm.fans))])])],1),(_vm.isOwner)?_c('v-btn',{staticClass:\"font-weight-light\",attrs:{\"color\":\"darkinfo\",\"round\":\"\",\"to\":\"/edit-profile\"}},[_vm._v(\"Edit profile\")]):[(_vm.isFollow)?_c('v-btn',{staticClass:\"font-weight-light\",attrs:{\"color\":\"darkinfo\",\"round\":\"\"},on:{\"click\":_vm.goFollow}},[_vm._v(\"Unfollowed\")]):_c('v-btn',{staticClass:\"font-weight-light\",attrs:{\"color\":\"darkinfo\",\"round\":\"\"},on:{\"click\":_vm.goFollow}},[_vm._v(\"Follow\")])]],2)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fill-height fluid grid-list-xl>\n    <v-layout justify-center wrap>\n      <v-flex xs12 md8>\n        <material-card :title=\"title\" :text=\"subtitle\" color=\"myinfo\">\n          <v-layout row wrap>\n            <v-flex v-for=\"(pixel,index) of pixels.slice(1)\" :key=\"index\" md4>\n              <material-my-card :pixel=\"pixel\"/>\n            </v-flex>\n          </v-layout>\n        </material-card>\n      </v-flex>\n      <v-flex xs12 md4>\n        <material-card class=\"v-card-profile\">\n          <v-avatar slot=\"offset\" class=\"mx-auto d-block\" size=\"130\">\n            <img src=\"https://demos.creative-tim.com/vue-material-dashboard/img/marc.aba54d65.jpg\">\n          </v-avatar>\n          <v-spacer/>\n          <v-card-text class=\"text-xs-center\">\n            <h6 class=\"category text-gray font-weight-thin mb-3\">{{ email }}</h6>\n            <h4 class=\"card-title font-weight-light\">{{ username }}</h4>\n            <p class=\"card-description font-weight-light\">{{ about }}</p>\n            <v-card-text class=\"body-2\">\n              <router-link :to=\"followPath\">\n                <span color=\"lightinfo\">Follow: {{ follow }}</span>\n              </router-link>\n              <el-button type=\"text\" class=\"items\" @click=\"goStar\">\n                <span color=\"lightinfo\">Star: {{ star }}</span>\n              </el-button>\n              <router-link :to=\"fansPath\" class=\"items\">\n                <span color=\"lightinfo\">Fans: {{ fans }}</span>\n              </router-link>\n            </v-card-text>\n            <v-btn\n              v-if=\"isOwner\"\n              color=\"darkinfo\"\n              round\n              class=\"font-weight-light\"\n              to=\"/edit-profile\"\n            >Edit profile</v-btn>\n            <template v-else>\n              <v-btn\n                v-if=\"isFollow\"\n                color=\"darkinfo\"\n                round\n                class=\"font-weight-light\"\n                @click=\"goFollow\"\n              >Unfollowed</v-btn>\n              <v-btn\n                v-else\n                color=\"darkinfo\"\n                round\n                class=\"font-weight-light\"\n                @click=\"goFollow\"\n              >Follow</v-btn>\n            </template>\n          </v-card-text>\n        </material-card>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  // add by keith\n  data: () => ({\n    username: \"\",\n    email: \"\",\n    about: \"\",\n    follow: 0,\n    star: 0,\n    fans: 0,\n    pixels: [{}],\n    isOwner: false,\n    followPath: \"\",\n    fansPath: \"\",\n    starPath: \"\",\n    isFollow: false,\n    title: \"\",\n    subtitle: \"\"\n  }),\n\n  watch: {\n    // 监听路由以响应路由参数变化\n    $route: \"getInfo\",\n    followPath: \"getData\"\n  },\n\n  created: function() {\n    this.getInfo();\n  },\n\n  methods: {\n    getInfo() {\n      // 根据路由参数构造页面关联的路由\n      this.followPath = \"/user/\" + this.$route.params.id + \"/type/follow\";\n      this.fansPath = \"/user/\" + this.$route.params.id + \"/type/fans\";\n      this.starPath = \"/user-profile/\" + this.$route.params.id + \"/type/star\";\n      // 判断用户权限\n      this.isOwner = this.$route.params.id === window.localStorage.uid;\n      // 清空并获取新的数据\n      this.pixels = [];\n      this.getTitle();\n      this.getData();\n      this.getPic();\n    },\n    getTitle() {\n      // 判断用户当前列表\n      switch (this.$route.params.type) {\n        case \"info\":\n          this.title = \"作品列表\";\n          this.subtitle = \"在这里查看并管理您的作品\";\n          break;\n        case \"star\":\n          this.title = \"收藏列表\";\n          this.subtitle = \"在这里查看并管理您收藏的作品\";\n          break;\n      }\n    },\n    getData() {\n      // 请求用户个人信息\n      this.$api.user\n        .getInfo({\n          uid: this.$route.params.id\n        })\n        .then(res => {\n          console.log(res);\n          var info = res.data.userInfo;\n          this.username = info.username;\n          this.email = info.email;\n          this.about = info.introduction;\n          this.follow = info.follow;\n          this.star = info.star;\n          this.fans = info.fans;\n          this.judge();\n        })\n        .catch(err => {});\n    },\n    getPic() {\n      switch (this.$route.params.type) {\n        case \"info\":\n          // 请求用户上传的图片\n          this.$api.image\n            .getImageListByUid({\n              uid: this.$route.params.id\n            })\n            .then(res => {\n              for (let data of res.data.imageList) {\n                var pixel = {\n                  smallUrl: this.$api.root.getOriginalUrl(data.url),\n                  pid: data.iid,\n                  views: data.count,\n                  stars: data.star,\n                  likes: data.thumb\n                };\n                this.pixels.push(pixel);\n              }\n            })\n            .catch(err => {});\n          break;\n        case \"star\":\n          this.$api.image\n            .myStars({\n              uid: this.$route.params.id\n            })\n            .then(res => {\n              for (let data of res.data.starList) {\n                var pixel = {\n                  smallUrl: this.$api.root.getOriginalUrl(data.url),\n                  pid: data.iid,\n                  views: data.count,\n                  stars: data.star,\n                  likes: data.thumb\n                };\n                this.pixels.push(pixel);\n              }\n            })\n            .catch(err => {});\n          break;\n      }\n    },\n    goFollow() {\n      // 关注或取消关注用户\n      this.$api.user\n        .goFollow({\n          isFollow: !this.isFollow,\n          uid: window.localStorage.uid,\n          fid: this.$route.params.id\n        })\n        .then(res => {\n          console.log(res);\n          this.getData();\n        })\n        .catch(err => {});\n    },\n    goStar() {\n      // 访问用户 star 列表\n      this.$router.replace(this.starPath);\n      this.getTitle();\n      this.pixels = [];\n      this.getPic();\n    },\n    judge() {\n      // 判断用户是否已经关注该用户\n      this.$api.user\n        .followRelate({\n          uid: window.localStorage.uid,\n          fid: this.$route.params.id\n        })\n        .then(res => {\n          console.log(res);\n          this.isFollow = res.data.isFollow;\n        })\n        .catch(err => {});\n    }\n  }\n};\n</script>\n\n<style>\n.items {\n  margin-left: 50px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserProfile.vue?vue&type=template&id=c3a8f43e&\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserProfile.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}