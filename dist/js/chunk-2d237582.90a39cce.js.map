{"version":3,"sources":["webpack:///./src/views/EditProfile.vue?177e","webpack:///src/views/EditProfile.vue","webpack:///./src/views/EditProfile.vue?cc8f","webpack:///./src/views/EditProfile.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fill-height","fluid","grid-list-xl","justify-center","wrap","xs12","md8","color","title","text","ref","py-0","md4","label","model","value","callback","$$v","newName","expression","newEmail","md6","type","hint","newPwd","rules","match","clearable","about","text-xs-right","staticClass","on","click","$event","commit","_v","slot","size","src","_s","staticRenderFns","EditProfilevue_type_script_lang_js_","data","created","_this","$api","user","getInfo","uid","window","localStorage","then","res","info","userInfo","username","email","introduction","catch","err","computed","_this2","rule","v","push","watch","methods","validateField","$refs","form","validate","_this3","edit","password","console","log","status","$message","message","path","$router","replace","clear","query","redirect","error","views_EditProfilevue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"uHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,eAAyBE,MAAA,CAAOC,cAAA,GAAAC,MAAA,GAAAC,eAAA,KAA+C,CAAAL,EAAA,YAAiBE,MAAA,CAAOI,iBAAA,GAAAC,KAAA,KAA+B,CAAAP,EAAA,UAAeE,MAAA,CAAOM,KAAA,GAAAC,IAAA,KAAoB,CAAAT,EAAA,iBAAsBE,MAAA,CAAOQ,MAAA,SAAAC,MAAA,eAAAC,KAAA,0BAAwE,CAAAZ,EAAA,UAAea,IAAA,QAAW,CAAAb,EAAA,eAAoBE,MAAA,CAAOY,OAAA,KAAW,CAAAd,EAAA,YAAiBE,MAAA,CAAOK,KAAA,KAAW,CAAAP,EAAA,UAAeE,MAAA,CAAOM,KAAA,GAAAO,IAAA,KAAoB,CAAAf,EAAA,gBAAqBE,MAAA,CAAOQ,MAAA,YAAAM,MAAA,aAAwCC,MAAA,CAAQC,MAAAtB,EAAA,QAAAuB,SAAA,SAAAC,GAA6CxB,EAAAyB,QAAAD,GAAgBE,WAAA,cAAuB,GAAAtB,EAAA,UAAmBE,MAAA,CAAOM,KAAA,GAAAC,IAAA,KAAoB,CAAAT,EAAA,gBAAqBE,MAAA,CAAOc,MAAA,gBAAAN,MAAA,aAA4CO,MAAA,CAAQC,MAAAtB,EAAA,SAAAuB,SAAA,SAAAC,GAA8CxB,EAAA2B,SAAAH,GAAiBE,WAAA,eAAwB,GAAAtB,EAAA,UAAmBE,MAAA,CAAOM,KAAA,GAAAgB,IAAA,KAAoB,CAAAxB,EAAA,gBAAqBE,MAAA,CAAOc,MAAA,eAAAN,MAAA,YAAAe,KAAA,WAAAC,KAAA,eAAkFT,MAAA,CAAQC,MAAAtB,EAAA,OAAAuB,SAAA,SAAAC,GAA4CxB,EAAA+B,OAAAP,GAAeE,WAAA,aAAsB,GAAAtB,EAAA,UAAmBE,MAAA,CAAOM,KAAA,GAAAgB,IAAA,KAAoB,CAAAxB,EAAA,gBAAqBE,MAAA,CAAOc,MAAA,kBAAAN,MAAA,YAAAe,KAAA,WAAAG,MAAAhC,EAAAgC,OAAkFX,MAAA,CAAQC,MAAAtB,EAAA,MAAAuB,SAAA,SAAAC,GAA2CxB,EAAAiC,MAAAT,GAAcE,WAAA,YAAqB,GAAAtB,EAAA,UAAmBE,MAAA,CAAOM,KAAA,KAAW,CAAAR,EAAA,cAAmBE,MAAA,CAAOQ,MAAA,YAAAM,MAAA,WAAAE,MAAA,2DAAAY,UAAA,GAAAJ,KAAA,cAA6IT,MAAA,CAAQC,MAAAtB,EAAA,MAAAuB,SAAA,SAAAC,GAA2CxB,EAAAmC,MAAAX,GAAcE,WAAA,YAAqB,GAAAtB,EAAA,UAAmBE,MAAA,CAAOM,KAAA,GAAAwB,gBAAA,KAA8B,CAAAhC,EAAA,SAAciC,YAAA,yBAAA/B,MAAA,CAA4CQ,MAAA,aAAoBwB,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAxC,EAAAyC,YAAsB,CAAAzC,EAAA0C,GAAA,4CAAAtC,EAAA,UAAkEE,MAAA,CAAOM,KAAA,GAAAO,IAAA,KAAoB,CAAAf,EAAA,iBAAsBiC,YAAA,kBAA6B,CAAAjC,EAAA,YAAiBiC,YAAA,kBAAA/B,MAAA,CAAqCqC,KAAA,SAAAC,KAAA,OAA6BD,KAAA,UAAe,CAAAvC,EAAA,OAAYE,MAAA,CAAOuC,IAAA,mFAAqFzC,EAAA,eAAsBiC,YAAA,kBAA6B,CAAAjC,EAAA,MAAWiC,YAAA,4CAAuD,CAAArC,EAAA0C,GAAA1C,EAAA8C,GAAA7C,KAAAwB,YAAArB,EAAA,MAA0CiC,YAAA,gCAA2C,CAAArC,EAAA0C,GAAA1C,EAAA8C,GAAA7C,KAAA0B,aAAAvB,EAAA,KAA0CiC,YAAA,sCAAiD,CAAArC,EAAA0C,GAAA1C,EAAA8C,GAAA7C,KAAAkC,aAAA,gBACl7EY,EAAA,GCsEAC,qDAAA,CAEAC,KAAA,kBACAxB,QAAA,GACAE,SAAA,GACAI,OAAA,GACAE,MAAA,GACAE,MAAA,KAGAe,QAAA,eAAAC,EAAAlD,KACAA,KAAAmD,KAAAC,KACAC,QAAA,CACAC,IAAAC,OAAAC,aAAAF,MAEAG,KAAA,SAAAC,GACA,IAAAC,EAAAD,EAAAV,KAAAY,SACAV,EAAA1B,QAAAmC,EAAAE,SACAX,EAAAxB,SAAAiC,EAAAG,MACAZ,EAAAhB,MAAAyB,EAAAI,eAEAC,MAAA,SAAAC,OAGAC,SAAA,CACAnC,MADA,WACA,IAAAoC,EAAAnE,KACA+B,EAAA,GACA,GAAA/B,KAAA8B,OAAA,CACA,IAAAsC,EAAA,SAAAC,GAAA,SAAAA,QAAAF,EAAArC,QAAA,aACAC,EAAAuC,KAAAF,GAEA,OAAArC,IAIAwC,MAAA,CACAvC,MAAA,iBAEAwC,QAAA,CACAC,cADA,WAEAzE,KAAA0E,MAAAC,KAAAC,YAGApC,OALA,WAKA,IAAAqC,EAAA7E,KACAA,KAAA0E,MAAAC,KAAAC,YACA5E,KAAAmD,KAAAC,KACA0B,KAAA,CACAjB,SAAA7D,KAAAwB,QACAsC,MAAA9D,KAAA0B,SACAqD,SAAA/E,KAAA8B,OACAiC,aAAA/D,KAAAkC,MACAoB,IAAAC,OAAAC,aAAAF,MAEAG,KAAA,SAAAC,GAEA,OADAsB,QAAAC,IAAAvB,GACAA,EAAAV,KAAAkC,QACA,UACAL,EAAAM,SAAA,CACAC,QAAA,UACAxD,KAAA,YAEA,IAAAyD,EACA,iBAAA9B,OAAAC,aAAAF,IAAA,aACAuB,EAAAS,QAAAC,QAAAF,GACA,MACA,UACAR,EAAAM,SAAA,CACAC,QAAA,gBACAxD,KAAA,YAGA2B,OAAAC,aAAAgC,QACAX,EAAAS,QAAAC,QAAA,CACAF,KAAA,SACAI,MAAA,CACAC,SAAA,mBAGA,MACA,QACAb,EAAAM,SAAAQ,MAAAjC,EAAAV,KAAAoC,YAGApB,MAAA,SAAAC,UC1Jyb2B,EAAA,cCOzbC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACA9F,EACAgD,GACF,EACA,KACA,KACA,MAIekD,EAAA,WAAAH","file":"js/chunk-2d237582.90a39cce.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md8\":\"\"}},[_c('material-card',{attrs:{\"color\":\"myinfo\",\"title\":\"Edit Profile\",\"text\":\"Complete your profile\"}},[_c('v-form',{ref:\"form\"},[_c('v-container',{attrs:{\"py-0\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md4\":\"\"}},[_c('v-text-field',{attrs:{\"color\":\"myprimary\",\"label\":\"User Name\"},model:{value:(_vm.newName),callback:function ($$v) {_vm.newName=$$v},expression:\"newName\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md8\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Email Address\",\"color\":\"myprimary\"},model:{value:(_vm.newEmail),callback:function ($$v) {_vm.newEmail=$$v},expression:\"newEmail\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md6\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"New Password\",\"color\":\"myprimary\",\"type\":\"password\",\"hint\":\"修改密码需要重新登录哦\"},model:{value:(_vm.newPwd),callback:function ($$v) {_vm.newPwd=$$v},expression:\"newPwd\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md6\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Repeat Password\",\"color\":\"myprimary\",\"type\":\"password\",\"rules\":_vm.rules},model:{value:(_vm.match),callback:function ($$v) {_vm.match=$$v},expression:\"match\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-textarea',{attrs:{\"color\":\"myprimary\",\"label\":\"About Me\",\"value\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\"clearable\":\"\",\"hint\":\"向大家介绍一下自己吧\"},model:{value:(_vm.about),callback:function ($$v) {_vm.about=$$v},expression:\"about\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"text-xs-right\":\"\"}},[_c('v-btn',{staticClass:\"mx-0 font-weight-light\",attrs:{\"color\":\"myprimary\"},on:{\"click\":function($event){return _vm.commit()}}},[_vm._v(\"Update Profile\")])],1)],1)],1)],1)],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"md4\":\"\"}},[_c('material-card',{staticClass:\"v-card-profile\"},[_c('v-avatar',{staticClass:\"mx-auto d-block\",attrs:{\"slot\":\"offset\",\"size\":\"130\"},slot:\"offset\"},[_c('img',{attrs:{\"src\":\"https://demos.creative-tim.com/vue-material-dashboard/img/marc.aba54d65.jpg\"}})]),_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('h6',{staticClass:\"category text-gray font-weight-thin mb-3\"},[_vm._v(_vm._s(this.newName))]),_c('h4',{staticClass:\"card-title font-weight-light\"},[_vm._v(_vm._s(this.newEmail))]),_c('p',{staticClass:\"card-description font-weight-light\"},[_vm._v(_vm._s(this.about))])])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fill-height fluid grid-list-xl>\n    <v-layout justify-center wrap>\n      <v-flex xs12 md8>\n        <material-card color=\"myinfo\" title=\"Edit Profile\" text=\"Complete your profile\">\n          <v-form ref=\"form\">\n            <v-container py-0>\n              <v-layout wrap>\n                <v-flex xs12 md4>\n                  <v-text-field color=\"myprimary\" label=\"User Name\" v-model=\"newName\"/>\n                </v-flex>\n                <v-flex xs12 md8>\n                  <v-text-field label=\"Email Address\" color=\"myprimary\" v-model=\"newEmail\"/>\n                </v-flex>\n                <v-flex xs12 md6>\n                  <v-text-field\n                    label=\"New Password\"\n                    color=\"myprimary\"\n                    type=\"password\"\n                    hint=\"修改密码需要重新登录哦\"\n                    v-model=\"newPwd\"\n                  />\n                </v-flex>\n                <v-flex xs12 md6>\n                  <v-text-field\n                    label=\"Repeat Password\"\n                    color=\"myprimary\"\n                    type=\"password\"\n                    v-model=\"match\"\n                    :rules=\"rules\"\n                  />\n                </v-flex>\n                <v-flex xs12>\n                  <v-textarea\n                    color=\"myprimary\"\n                    label=\"About Me\"\n                    value=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\"\n                    clearable\n                    hint=\"向大家介绍一下自己吧\"\n                    v-model=\"about\"\n                  />\n                </v-flex>\n                <v-flex xs12 text-xs-right>\n                  <v-btn\n                    class=\"mx-0 font-weight-light\"\n                    color=\"myprimary\"\n                    @click=\"commit()\"\n                  >Update Profile</v-btn>\n                </v-flex>\n              </v-layout>\n            </v-container>\n          </v-form>\n        </material-card>\n      </v-flex>\n      <v-flex xs12 md4>\n        <material-card class=\"v-card-profile\">\n          <v-avatar slot=\"offset\" class=\"mx-auto d-block\" size=\"130\">\n            <img src=\"https://demos.creative-tim.com/vue-material-dashboard/img/marc.aba54d65.jpg\">\n          </v-avatar>\n          <v-card-text class=\"text-xs-center\">\n            <h6 class=\"category text-gray font-weight-thin mb-3\">{{this.newName}}</h6>\n            <h4 class=\"card-title font-weight-light\">{{this.newEmail}}</h4>\n            <p class=\"card-description font-weight-light\">{{this.about}}</p>\n          </v-card-text>\n        </material-card>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  // create by keith\n  data: () => ({\n    newName: \"\",\n    newEmail: \"\",\n    newPwd: \"\",\n    match: \"\",\n    about: \"\"\n  }),\n\n  created: function() {\n    this.$api.user\n      .getInfo({\n        uid: window.localStorage.uid\n      })\n      .then(res => {\n        var info = res.data.userInfo;\n        this.newName = info.username;\n        this.newEmail = info.email;\n        this.about = info.introduction;\n      })\n      .catch(err => {});\n  },\n\n  computed: {\n    rules() {\n      const rules = [];\n      if (this.newPwd) {\n        const rule = v => (!!v && v) === this.newPwd || \"两次密码输入不一致\";\n        rules.push(rule);\n      }\n      return rules;\n    }\n  },\n\n  watch: {\n    match: \"validateField\"\n  },\n  methods: {\n    validateField() {\n      this.$refs.form.validate();\n    },\n\n    commit() {\n      if (this.$refs.form.validate()) {\n        this.$api.user\n          .edit({\n            username: this.newName,\n            email: this.newEmail,\n            password: this.newPwd,\n            introduction: this.about,\n            uid: window.localStorage.uid\n          })\n          .then(res => {\n            console.log(res);\n            switch (res.data.status) {\n              case \"200\":\n                this.$message({\n                  message: \"信息修改成功！\",\n                  type: \"success\"\n                });\n                var path =\n                  \"/user-profile/\" + window.localStorage.uid + \"/type/info\";\n                this.$router.replace(path);\n                break;\n              case \"201\":\n                this.$message({\n                  message: \"信息修改成功！需要重新登录\",\n                  type: \"success\"\n                });\n                // remove old user info and token\n                window.localStorage.clear();\n                this.$router.replace({\n                  path: \"/login\",\n                  query: {\n                    redirect: \"/user-profile\"\n                  }\n                });\n                break;\n              default:\n                this.$message.error(res.data.message);\n            }\n          })\n          .catch(err => {});\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.6.4@vue-loader/lib/index.js??vue-loader-options!./EditProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.6.4@vue-loader/lib/index.js??vue-loader-options!./EditProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditProfile.vue?vue&type=template&id=13b00743&\"\nimport script from \"./EditProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./EditProfile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.6.4@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}